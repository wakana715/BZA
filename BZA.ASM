NW1 EQU $FE98:NW2 EQU $DC76
NB1 EQU $B5  :NB2 EQU $A4
ORG $D000       ;MNEMONIC TEST
NOP:LD BC,NW1:LD (BC),A:INC BC:INC B:DEC B:LD B,NB1:RLCA
EX AF,AF:ADD HL,BC:LD A,(BC):DEC BC:INC C:DEC C:LD C,NB1:RRCA
PREV01:DJNZ PREV01
LD DE,NW1:LD (DE),A:INC DE:INC D:DEC D:LD D,NB1:RLA
JR NEXT01
NEXT01:
ADD HL,DE:LD A,(DE):DEC DE:INC E:DEC E:LD E,NB1
PREV02:RRA:JR NZ,PREV02
LD HL,NW1:LD (NW1),HL:INC HL:INC H:DEC H:LD H,NB1:DAA
JR Z,NEXT02:NOP
NEXT02:
ADD HL,HL:LD HL,(NW1):DEC HL:INC L:DEC L:LD L,NB1
PREV03:NOP:CPL:JR NC,PREV03
LD SP,NW1:LD (NW1),A:INC SP:INC (HL):DEC (HL):LD (HL),NB1:SCF
JR C,NEXT03:NOP:NOP
NEXT03:
ADD HL,SP:LD A,(NW1):DEC SP:INC A:DEC A:LD A,NB1:CCF
LD B,B:LD B,C:LD B,D:LD B,E:LD B,H:LD B,L:LD B,(HL):LD B,A
LD C,B:LD C,C:LD C,D:LD C,E:LD C,H:LD C,L:LD C,(HL):LD C,A
LD D,B:LD D,C:LD D,D:LD D,E:LD D,H:LD D,L:LD D,(HL):LD D,A
LD E,B:LD E,C:LD E,D:LD E,E:LD E,H:LD E,L:LD E,(HL):LD E,A
LD H,B:LD H,C:LD H,D:LD H,E:LD H,H:LD H,L:LD H,(HL):LD H,A
LD L,B:LD L,C:LD L,D:LD L,E:LD L,H:LD L,L:LD L,(HL):LD L,A
LD (HL),B:LD (HL),C:LD (HL),D:LD (HL),E:LD (HL),H:LD (HL),L
HALT:LD (HL),A
LD A,B:LD A,C:LD A,D:LD A,E:LD A,H:LD A,L:LD A,(HL):LD A,A
ADD A,B:ADD A,C:ADD A,D:ADD A,E
ADD A,H:ADD A,L:ADD A,(HL):ADD A,A
ADC A,B:ADC A,C:ADC A,D:ADC A,E
ADC A,H:ADC A,L:ADC A,(HL):ADC A,A
SUB B:SUB C:SUB D:SUB E:SUB H:SUB L:SUB (HL):SUB A
SBC A,B:SBC A,C:SBC A,D:SBC A,E
SBC A,H:SBC A,L:SBC A,(HL):SBC A,A
AND B:AND C:AND D:AND E:AND H:AND L:AND (HL):AND A
XOR B:XOR C:XOR D:XOR E:XOR H:XOR L:XOR (HL):XOR A
OR B:OR C:OR D:OR E:OR H:OR L:OR (HL):OR A
CP B:CP C:CP D:CP E:CP H:CP L:CP (HL):CP A
RET NZ:POP BC:JP NZ,NW1:JP NW1
CALL NZ,NW1:PUSH BC:ADD A,NB1:RST 0
RET  Z:RET   :JP  Z,NW1:CALL Z,NW1:CALL NW1:ADC A,NB1:RST 1
RET NC:POP DE:JP NC,NW1:OUT (NB1),A
CALL NC,NW1:PUSH DE:SUB NB1:RST 2
RET  C:EXX   :JP  C,NW1:IN A,(NB1):CALL  C,NW1:SBC A,NB1:RST 3
RET PO:POP HL:JP PO,NW1:EX (SP),HL
CALL PO,NW1:PUSH HL:AND NB1:RST 4
RET PE:JP (HL):JP PE,NW1:EX DE,HL  :CALL PE,NW1:XOR   NB1:RST 5
RET P :POP AF:JP P,NW1:DI:CALL P,NW1:PUSH AF:OR NB1:RST 6
RET M:LD SP,HL:JP M,NW1:EI:CALL M,NW1:CP NB1:RST 7
RLC B:RLC C:RLC D:RLC E:RLC H:RLC L:RLC (HL):RLC A
RRC B:RRC C:RRC D:RRC E:RRC H:RRC L:RRC (HL):RRC A
RL B:RL C:RL D:RL E:RL H:RL L:RL (HL):RL A
RR B:RR C:RR D:RR E:RR H:RR L:RR (HL):RR A
SLA B:SLA C:SLA D:SLA E:SLA H:SLA L:SLA (HL):SLA A
SRA B:SRA C:SRA D:SRA E:SRA H:SRA L:SRA (HL):SRA A
SLI B:SLI C:SLI D:SLI E:SLI H:SLI L:SLI (HL):SLI A
SRL B:SRL C:SRL D:SRL E:SRL H:SRL L:SRL (HL):SRL A
BIT 0,B:BIT 0,C:BIT 0,D:BIT 0,E:BIT 0,H:BIT 0,L:BIT 0,(HL):BIT 0,A
BIT 1,B:BIT 1,C:BIT 1,D:BIT 1,E:BIT 1,H:BIT 1,L:BIT 1,(HL):BIT 1,A
BIT 2,B:BIT 2,C:BIT 2,D:BIT 2,E:BIT 2,H:BIT 2,L:BIT 2,(HL):BIT 2,A
BIT 3,B:BIT 3,C:BIT 3,D:BIT 3,E:BIT 3,H:BIT 3,L:BIT 3,(HL):BIT 3,A
BIT 4,B:BIT 4,C:BIT 4,D:BIT 4,E:BIT 4,H:BIT 4,L:BIT 4,(HL):BIT 4,A
BIT 5,B:BIT 5,C:BIT 5,D:BIT 5,E:BIT 5,H:BIT 5,L:BIT 5,(HL):BIT 5,A
BIT 6,B:BIT 6,C:BIT 6,D:BIT 6,E:BIT 6,H:BIT 6,L:BIT 6,(HL):BIT 6,A
BIT 7,B:BIT 7,C:BIT 7,D:BIT 7,E:BIT 7,H:BIT 7,L:BIT 7,(HL):BIT 7,A
RES 0,B:RES 0,C:RES 0,D:RES 0,E:RES 0,H:RES 0,L:RES 0,(HL):RES 0,A
RES 1,B:RES 1,C:RES 1,D:RES 1,E:RES 1,H:RES 1,L:RES 1,(HL):RES 1,A
RES 2,B:RES 2,C:RES 2,D:RES 2,E:RES 2,H:RES 2,L:RES 2,(HL):RES 2,A
RES 3,B:RES 3,C:RES 3,D:RES 3,E:RES 3,H:RES 3,L:RES 3,(HL):RES 3,A
RES 4,B:RES 4,C:RES 4,D:RES 4,E:RES 4,H:RES 4,L:RES 4,(HL):RES 4,A
RES 5,B:RES 5,C:RES 5,D:RES 5,E:RES 5,H:RES 5,L:RES 5,(HL):RES 5,A
RES 6,B:RES 6,C:RES 6,D:RES 6,E:RES 6,H:RES 6,L:RES 6,(HL):RES 6,A
RES 7,B:RES 7,C:RES 7,D:RES 7,E:RES 7,H:RES 7,L:RES 7,(HL):RES 7,A
SET 0,B:SET 0,C:SET 0,D:SET 0,E:SET 0,H:SET 0,L:SET 0,(HL):SET 0,A
SET 1,B:SET 1,C:SET 1,D:SET 1,E:SET 1,H:SET 1,L:SET 1,(HL):SET 1,A
SET 2,B:SET 2,C:SET 2,D:SET 2,E:SET 2,H:SET 2,L:SET 2,(HL):SET 2,A
SET 3,B:SET 3,C:SET 3,D:SET 3,E:SET 3,H:SET 3,L:SET 3,(HL):SET 3,A
SET 4,B:SET 4,C:SET 4,D:SET 4,E:SET 4,H:SET 4,L:SET 4,(HL):SET 4,A
SET 5,B:SET 5,C:SET 5,D:SET 5,E:SET 5,H:SET 5,L:SET 5,(HL):SET 5,A
SET 6,B:SET 6,C:SET 6,D:SET 6,E:SET 6,H:SET 6,L:SET 6,(HL):SET 6,A
SET 7,B:SET 7,C:SET 7,D:SET 7,E:SET 7,H:SET 7,L:SET 7,(HL):SET 7,A
ADD IX,BC:ADD IX,DE:LD IX,NW1:LD (NW1),IX
INC IX:INC XH:INC IXH:DEC XH:DEC IXH:LD XH,NB1:LD IXH,NB1
ADD IX,IX:LD IX,(NW1)
DEC IX:INC XL:INC IXL:DEC XL:DEC IXL:LD XL,NB1:LD IXL,NB1
INC (IX+NB2):DEC (IX+NB2):LD (IX+NB2),NB1:ADD IX,SP
LD B,(IX+NB2):LD C,(IX+NB2):LD D,(IX+NB2):LD E,(IX+NB2)
LD XH,B:LD IXH,B:LD XH,C:LD IXH,C
LD XH,D:LD IXH,D:LD XH,E:LD IXH,E
LD XH,H:LD IXH,H:LD XH,L:LD IXH,L
LD H,(IX+NB2):LD XH,A:LD IXH,A
LD XL,B:LD IXL,B:LD XL,C:LD IXL,C
LD XL,D:LD IXL,D:LD XL,E:LD IXL,E
LD XL,H:LD IXL,H:LD XL,L:LD IXL,L
LD L,(IX+NB2):LD XL,A:LD IXL,A
LD (IX+NB2),B:LD (IX+NB2),C:LD (IX+NB2),D:LD (IX+NB2),E
LD (IX+NB2),H:LD (IX+NB2),L:LD (IX+NB2),A:LD A,(IX+NB2)
ADD A,(IX+NB2):ADC A,(IX+NB2):SUB XH:SUB IXH:SUB XL:SUB IXL
SUB (IX+NB2):SBC A,(IX+NB2)
AND XH:AND IXH:AND XL:AND IXL:AND (IX+NB2)
XOR XH:XOR IXH:XOR XL:XOR IXL:XOR (IX+NB2)
OR XH:OR IXH:OR XL:OR IXL:OR (IX+NB2)
CP XH:CP IXH:CP XL:CP IXL:CP (IX+NB2)
LD B,RLC (IX+NB2):LD C,RLC (IX+NB2)
LD D,RLC (IX+NB2):LD E,RLC (IX+NB2)
LD H,RLC (IX+NB2):LD L,RLC (IX+NB2)
     RLC (IX+NB2):LD A,RLC (IX+NB2)
LD B,RRC (IX+NB2):LD C,RRC (IX+NB2)
LD D,RRC (IX+NB2):LD E,RRC (IX+NB2)
LD H,RRC (IX+NB2):LD L,RRC (IX+NB2)
     RRC (IX+NB2):LD A,RRC (IX+NB2)
LD B,RL  (IX+NB2):LD C,RL  (IX+NB2)
LD D,RL  (IX+NB2):LD E,RL  (IX+NB2)
LD H,RL  (IX+NB2):LD L,RL  (IX+NB2)
     RL  (IX+NB2):LD A,RL  (IX+NB2)
LD B,RR  (IX+NB2):LD C,RR  (IX+NB2)
LD D,RR  (IX+NB2):LD E,RR  (IX+NB2)
LD H,RR  (IX+NB2):LD L,RR  (IX+NB2)
     RR  (IX+NB2):LD A,RR  (IX+NB2)
LD B,SLA (IX+NB2):LD C,SLA (IX+NB2)
LD D,SLA (IX+NB2):LD E,SLA (IX+NB2)
LD H,SLA (IX+NB2):LD L,SLA (IX+NB2)
     SLA (IX+NB2):LD A,SLA (IX+NB2)
LD B,SRA (IX+NB2):LD C,SRA (IX+NB2)
LD D,SRA (IX+NB2):LD E,SRA (IX+NB2)
LD H,SRA (IX+NB2):LD L,SRA (IX+NB2)
     SRA (IX+NB2):LD A,SRA (IX+NB2)
LD B,SLI (IX+NB2):LD C,SLI (IX+NB2)
LD D,SLI (IX+NB2):LD E,SLI (IX+NB2)
LD H,SLI (IX+NB2):LD L,SLI (IX+NB2)
     SLI (IX+NB2):LD A,SLI (IX+NB2)
LD B,SRL (IX+NB2):LD C,SRL (IX+NB2)
LD D,SRL (IX+NB2):LD E,SRL (IX+NB2)
LD H,SRL (IX+NB2):LD L,SRL (IX+NB2)
     SRL (IX+NB2):LD A,SRL (IX+NB2)
BIT 0,(IX+NB2):BIT 1,(IX+NB2):BIT 2,(IX+NB2):BIT 3,(IX+NB2)
BIT 4,(IX+NB2):BIT 5,(IX+NB2):BIT 6,(IX+NB2):BIT 7,(IX+NB2)
RES 0,(IX+NB2):RES 1,(IX+NB2):RES 2,(IX+NB2):RES 3,(IX+NB2)
RES 4,(IX+NB2):RES 5,(IX+NB2):RES 6,(IX+NB2):RES 7,(IX+NB2)
SET 0,(IX+NB2):SET 1,(IX+NB2):SET 2,(IX+NB2):SET 3,(IX+NB2)
SET 4,(IX+NB2):SET 5,(IX+NB2):SET 6,(IX+NB2):SET 7,(IX+NB2)
POP IX:EX (SP),IX:PUSH IX:JP (IX):LD SP,IX
IN B,(C):OUT (C),B:SBC HL,BC:LD (NW1),BC:NEG:RETN:IM 0:LD I,A
IN C,(C):OUT (C),C:ADC HL,BC:LD BC,(NW1)    :RETI     :LD R,A
IN D,(C):OUT (C),D:SBC HL,DE:LD (NW1),DE         :IM 1:LD A,I
IN E,(C):OUT (C),E:ADC HL,DE:LD DE,(NW1)         :IM 2:LD A,R
IN H,(C):OUT (C),H:SBC HL,HL:RRD
IN L,(C):OUT (C),L:ADC HL,HL:RLD
IN F,(C):OUT (C),0:SBC HL,SP
IN A,(C):OUT (C),A:ADC HL,SP:LD SP,(NW1)
LDI: CPI: INI: OUTI:LDD:  CPD: IND: OUTD
LDIR:CPIR:INIR:OTIR:LDDR: CPDR:INDR:OTDR
ADD IY,BC:ADD IY,DE:LD IY,NW1:LD (NW1),IY
INC IY:INC IYH:DEC IYH:LD IYH,NB1:ADD IY,IY:LD IY,(NW1)
DEC IY:INC IYL:DEC IYL:LD IYL,NB1:INC (IY+NB2)
DEC (IY+NB2):LD (IY+NB2),NB1:ADD IY,SP
LD B,(IY+NB2):LD C,(IY+NB2):LD D,(IY+NB2):LD E,(IY+NB2)
LD IYH,B:LD IYH,C:LD IYH,D:LD IYH,E:LD IYH,H:LD IYH,L
LD H,(IY+NB2):LD IYH,A
LD IYL,B:LD IYL,C:LD IYL,D:LD IYL,E:LD IYL,H:LD IYL,L
LD L,(IY+NB2):LD IXL,A
LD (IY+NB2),B:LD (IY+NB2),C:LD (IY+NB2),D:LD (IY+NB2),E
LD (IY+NB2),H:LD (IY+NB2),L:LD (IY+NB2),A:LD A,(IY+NB2)
ADD A,(IY+NB2):ADC A,(IY+NB2)
SUB IYH:SUB IYL:SUB (IY+NB2):SBC A,(IY+NB2)
AND IYH:AND IYL:AND (IY+NB2):XOR IYH:XOR IYL:XOR (IY+NB2)
OR IYH:OR IYL:OR (IY+NB2):CP IYH:CP IYL:CP (IY+NB2)
LD B,RLC (IY+NB2):LD C,RLC (IY+NB2)
LD D,RLC (IY+NB2):LD E,RLC (IY+NB2)
LD H,RLC (IY+NB2):LD L,RLC (IY+NB2)
     RLC (IY+NB2):LD A,RLC (IY+NB2)
LD B,RRC (IY+NB2):LD C,RRC (IY+NB2)
LD D,RRC (IY+NB2):LD E,RRC (IY+NB2)
LD H,RRC (IY+NB2):LD L,RRC (IY+NB2)
     RRC (IY+NB2):LD A,RRC (IY+NB2)
LD B,RL  (IY+NB2):LD C,RL  (IY+NB2)
LD D,RL  (IY+NB2):LD E,RL  (IY+NB2)
LD H,RL  (IY+NB2):LD L,RL  (IY+NB2)
     RL  (IY+NB2):LD A,RL  (IY+NB2)
LD B,RR  (IY+NB2):LD C,RR  (IY+NB2)
LD D,RR  (IY+NB2):LD E,RR  (IY+NB2)
LD H,RR  (IY+NB2):LD L,RR  (IY+NB2)
     RR  (IY+NB2):LD A,RR  (IY+NB2)
LD B,SLA (IY+NB2):LD C,SLA (IY+NB2)
LD D,SLA (IY+NB2):LD E,SLA (IY+NB2)
LD H,SLA (IY+NB2):LD L,SLA (IY+NB2)
     SLA (IY+NB2):LD A,SLA (IY+NB2)
LD B,SRA (IY+NB2):LD C,SRA (IY+NB2)
LD D,SRA (IY+NB2):LD E,SRA (IY+NB2)
LD H,SRA (IY+NB2):LD L,SRA (IY+NB2)
     SRA (IY+NB2):LD A,SRA (IY+NB2)
LD B,SLI (IY+NB2):LD C,SLI (IY+NB2)
LD D,SLI (IY+NB2):LD E,SLI (IY+NB2)
LD H,SLI (IY+NB2):LD L,SLI (IY+NB2)
     SLI (IY+NB2):LD A,SLI (IY+NB2)
LD B,SRL (IY+NB2):LD C,SRL (IY+NB2)
LD D,SRL (IY+NB2):LD E,SRL (IY+NB2)
LD H,SRL (IY+NB2):LD L,SRL (IY+NB2)
     SRL (IY+NB2):LD A,SRL (IY+NB2)
BIT 0,(IY+NB2):BIT 1,(IY+NB2):BIT 2,(IY+NB2):BIT 3,(IY+NB2)
BIT 4,(IY+NB2):BIT 5,(IY+NB2):BIT 6,(IY+NB2):BIT 7,(IY+NB2)
RES 0,(IY+NB2):RES 1,(IY+NB2):RES 2,(IY+NB2):RES 3,(IY+NB2)
RES 4,(IY+NB2):RES 5,(IY+NB2):RES 6,(IY+NB2):RES 7,(IY+NB2)
SET 0,(IY+NB2):SET 1,(IY+NB2):SET 2,(IY+NB2):SET 3,(IY+NB2)
SET 4,(IY+NB2):SET 5,(IY+NB2):SET 6,(IY+NB2):SET 7,(IY+NB2)
POP  IY:EX (SP),IY:PUSH IY:JP (IY):LD SP,IY
DB 1,2,3,4,5:DW 6,7,8,9,10
